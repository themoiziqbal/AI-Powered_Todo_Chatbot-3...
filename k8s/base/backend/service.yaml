# ============================================================================
# Kubernetes Service for Backend API
# ============================================================================
# Phase IV & V: Exposes the backend pods within the cluster
# This allows other services (like frontend) to communicate with backend
# ============================================================================

apiVersion: v1
kind: Service
metadata:
  name: backend
  labels:
    app: todo-chatbot
    component: backend
spec:
  # Service type
  # ClusterIP: Internal access only (default)
  # LoadBalancer: External access (for cloud deployments)
  type: ClusterIP

  # Selector to match backend pods
  selector:
    app: todo-chatbot
    component: backend

  # Ports configuration
  ports:
  - name: http
    port: 8000        # Service port
    targetPort: 8000  # Container port
    protocol: TCP

  # Session affinity for sticky sessions (optional)
  # sessionAffinity: ClientIP
